openapi: "3.0.0"
info:
  title: Merikuri API Document
  version: "0.0.1"
  description: Merikuri API Document
paths:
  /users:
    post:
      summary: "ユーザー登録"
      description: "ユーザーを登録します"
      operationId: "createUser"
      tags:
        - users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserRequest"
      responses:
        '201':
          description: "Created"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreatedResponse"
        '400':
          description: "Bad Request"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestResponse"
        '404':
          description: "Not Found"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BadRequestResponse"

components:
  schemas:
    CreateUserRequest:
      type: object
      properties:
        firstName:
          type: string
          maxLength: 15
          minLength: 1
          description: "名前"
        lastName:
          type: string
          maxLength: 15
          minLength: 1
          description: "苗字"
        age:
          type: integer
          format: int32
          minimum: 1
          maximum: 200
          description: "年齢"
        tel:
          type: string
          pattern: '0\d{1,5}\-\d{0,4}\-\d{4}'
          description: "電話番号"
        address:
          type: string
          maxLength: 100
          minLength: 1
          description: "住所"
        email:
          type: string
          maxLength: 100
          minLength: 1
          format: email
          description: "メールアドレス"
        password:
          type: string
          maxLength: 30
          minLength: 8
          description: "パスワード"
      required:
        - firstName
        - lastName
        - age
        - tel
        - address
        - email
        - password
    CreatedResponse:
      type: object
      properties:
        code:
          type: string
          description: "コード"
        message:
          type: string
          description: "メッセージ"
      required:
        - code
        - message
    BadRequestResponse:
      type: object
      properties:
        code:
          type: string
          description: "コード"
        message:
          type: string
          default: "リクエストが不正です。"
          description: "メッセージ"
        invalid-params:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                description: "フィールド名"
              reason:
                type: string
                description: "エラー理由"
            required:
              - name
              - reason
      required:
        - code
        - message
    NotFoundResponse:
      type: object
      properties:
        code:
          type: string
          description: "コード"
        message:
          type: string
          description: "メッセージ"
      required:
        - code
        - message
    ServerErrorResponse:
      type: object
      properties:
        code:
          type: string
          description: "コード"
        message:
          type: string
          description: "メッセージ"
      required:
        - code
        - message